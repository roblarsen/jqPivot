<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html class="no-js" lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta charset="utf-8">
  <title>jqPivot</title>
  <link rel="stylesheet" type="text/css" href="css/main.css" />
</head>

<body>
<div id="grid"><table style="margin:0px"><tr><td rowspan="2"></td></tr></table>
</div>
  <script src="js/vendor/jquery.js"></script>
  <script src="js/vendor/jquery-ui-1.8.20.custom.min.js"></script>
  <!--<script src="js/colResizable-1.3.source.js"></script>-->
  <!-- scripts concatenated and minified via build script -->
  <script defer src="js/jqPivot.js"></script>
  <script defer src="js/mockupdata.js"></script>
  <!-- end scripts -->
  <script>
      function bind(scope, fn) {
          return function () {
              fn.apply(scope, arguments);
          }
      }
      $(document).ready(function () {
          var callbackToken,
              historicalData = GenerateStockData(5, 100), // [["AAPL", "12.3", "12/12/12"], ["FB", "15.3", "12/12/12"]];
              columnHeaders = ["Stock", "Value", "Date"],
              grid = $("#grid").jqPivot({
                  data: historicalData.slice(0, 20),
                  viewport: new $.jqPivot.jqPivotPagingViewport(),
                  gridRows: 10,
                  columnHeaders: columnHeaders,
                  liveDrag: true,
                  tooltipOptions: { defaultHtmlContent: "<div style=\"background-color:Silver;\">This tooltip is showing<br><b>{{_name}}</b>: {{value}}</div>" }
              });
          //$("<div/>").jqPivot.jqPivotPagingViewport(1);
          grid.jqPivot("maxRowsNumber", 100);
          //grid.options("viewport", "a");

          grid.on("jqpivotrequestdata", bind(this, function (event, data) {
              callbackToken = data;
              callbackToken.gridData = historicalData.slice(data.from, data.to);
              grid.jqPivot("populateData", callbackToken);
          }));
      });
   </script>
</body>
</html>
